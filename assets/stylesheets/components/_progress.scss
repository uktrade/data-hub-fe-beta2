@import "../settings";
@import "../tools";

$section-width: 25%;

.c-progress {
  margin: $default-spacing-unit * 2 auto 0;
  padding-bottom: $default-spacing-unit / 2;
}

.c-progress__bar {
  position: relative;
  width: 98%;
  margin: 0 auto;

  &::after,
  &::before {
    position: absolute;
    left: 0;
    top: -1px;
    width: 100%;
    height: 2px;
    content: "";
    background-color: $grey-3;
    z-index: 10;
  }

  &::after {
    background-color: $govuk-blue;
    z-index: 20;
  }

  &.c-progress__bar--prospect-stage {
    &::after {
      width: 0;
    }
  }

  &.c-progress__bar--assign-pm-stage {
    &::after {
      width: 25%;
    }
  }

  &.c-progress__bar--active-stage {
    &::after {
      width: 50%;
    }
  }

  &.c-progress__bar--verify-win-stage {
    &::after {
      width: 75%;
    }
  }

  &.c-progress__bar--won-stage {
    &::after {
      width: 100%;
    }
  }
}

.c-progress__stage {
  @include core-font(14);
  position: absolute;

  &::before {
    position: relative;
    width: 14px;
    height: 14px;
    margin: -7px -7px 0;
    content: "";
    border-radius: 20px;
    border: 2px solid $govuk-blue;
    outline: 2px solid $grey-4;
    background-color: $govuk-blue;
    display: block;
    z-index: 30;
  }
}

.c-progress__stage-title {
  position: relative;
  left: -50%;
}

.c-progress__bar {
  > li {
    &:first-child .c-progress__stage-title {
      left: -15%;
    }

    &:last-child .c-progress__stage-title {
      left: -85%;
    }
  }
}

.c-progress__stage--reset {
  &::before {
    background-color: $white;
    border: 2px solid $grey-3;
  }
}

.c-progress__stage--active {
  @include bold-font(16);

  &::before {
    background-color: $white;
    border: 2px solid $govuk-blue;
    width: 18px;
    height: 18px;
    margin: -9px -9px 0;
  }
}

.c-progress__stage--part-1 {
  left: 0;
}

.c-progress__stage--part-2 {
  left: $section-width;
}

.c-progress__stage--part-3 {
  left: $section-width * 2;
}

.c-progress__stage--part-4 {
  left: $section-width * 3;
}

.c-progress__stage--part-5 {
  left: $section-width * 4;
}

@include media($min-width: 1060px) {
  .c-progress__bar {
    width: 100%;

    > li {
      &:first-child,
      &:last-child {
        .c-progress__stage-title {
          left: -50%;
        }
      }
    }
  }
}
