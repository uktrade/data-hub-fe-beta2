{% extends "./_layout-view.njk" %}

{% block main_grid_right_column %}
  <h2 class="heading-medium">
    {% if company.headquarter_type.name === 'ghq' %}
      Global headquarters summary
    {% else %}
      Company summary
    {% endif %}
  </h2>

  {% if chDetails %}
    {% call Message({ type: 'muted', element: 'div' }) %}
      {% component 'key-value-table', items=chDetails %}
      <p>Powered by data from <strong>Companies House</strong></p>
    {% endcall %}
  {% endif %}

  {% if companyDetails %}
    {% component 'key-value-table', variant='striped', items=companyDetails %}
  {% endif %}

  {% if company.id %}
    <p><a href="/companies/{{company.id}}/edit" class="button button--secondary">Edit company details</a></p>
  {% else %}
    <p><a href="/companies/add/{{company.company_number}}" class="button">Add company</a></p>
  {% endif %}

  <div class="section">
    <h2 class="heading-medium">Account management</h2>
    {% component 'key-value-table', variant='striped', items=accountManagementDetails %}
    <p><a href="/companies/{{company.id}}/account-management/edit" class="button button--secondary">Edit account management</a></p>
  </div>

  {% if company.id and not company.archived %}
    <h2 class="heading-medium">Archive company</h2>
    <p>Archive this company if it is no longer required or active.</p>

    {% component 'archive-form', {
      label: 'Archive reason',
      options: ['Company is dissolved'],
      csrfToken: csrfToken,
      error: form.errors.reason,
      url: '/companies/' + company.id + '/archive'
    } %}
  {% endif %}
{% endblock %}
